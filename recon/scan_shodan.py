import shodan
import time

SHODAN_API_KEY = "API"

api = shodan.Shodan(SHODAN_API_KEY)

try:
    results = api.search('net:10.0.0.0/24')
    for service in results['matches']:
        hostinfo = api.host(service['ip_str'])

        
        portlist = ""
        try:
            for port in hostinfo['ports']:
                portlist = portlist + " " + str(port)
        except:
            print "Error during port listing"
        # Concat total post list with IP
        print service['ip_str'] + " - " + portlist
        time.sleep(1.1)

except shodan.APIError, e:
    print 'Error: %s' % e
